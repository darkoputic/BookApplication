{"ast":null,"code":"import { createEntityAdapter } from '@ngrx/entity';\nimport { createReducer, on } from '@ngrx/store';\nimport { BookActions, BooksApiActions, CollectionApiActions, ViewBookPageActions } from '../actions';\nexport var booksFeatureKey = 'books';\nexport var adapter = createEntityAdapter({\n  selectId: function selectId(book) {\n    return book.id;\n  },\n  sortComparer: false\n});\nexport var initialState = adapter.getInitialState({\n  selectedBookId: null\n});\nexport var reducer = createReducer(initialState, on(BooksApiActions.searchSuccess, CollectionApiActions.loadBooksSuccess, function (state, _ref) {\n  var books = _ref.books;\n  return adapter.addMany(books, state);\n}), on(BookActions.loadBook, function (state, _ref2) {\n  var book = _ref2.book;\n  return adapter.addOne(book, state);\n}), on(ViewBookPageActions.selectBook, function (state, _ref3) {\n  var id = _ref3.id;\n  return Object.assign(Object.assign({}, state), {\n    selectedBookId: id\n  });\n}));\nexport var selectId = function selectId(state) {\n  return state.selectedBookId;\n};","map":null,"metadata":{},"sourceType":"module"}